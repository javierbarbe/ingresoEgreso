{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport * as ui from './../../shared/ui.actions';\nimport { Validators } from '@angular/forms';\nimport { Component } from '@angular/core';\nimport Swal from 'sweetalert2';\nlet RegisterComponent = class RegisterComponent {\n  constructor(fb, store, authService, router) {\n    this.fb = fb;\n    this.store = store;\n    this.authService = authService;\n    this.router = router;\n    this.cargando = false;\n  }\n  ngOnInit() {\n    this.uiSusbscription$ = this.store.select('ui').subscribe(ui => {\n      this.cargando = ui.isLoading;\n      console.log(\"cargando en registroComponent\", this.cargando);\n    });\n    this.inicializaForm();\n  }\n  ngOnDestroy() {\n    this.uiSusbscription$.unsubscribe();\n  }\n  inicializaForm() {\n    this.registroForm = this.fb.group({\n      nombre: [\"\", Validators.required],\n      correo: [\"\", [Validators.required]],\n      password: [\"\", Validators.required]\n    });\n  }\n  crearUsuario() {\n    if (this.registroForm.invalid) return;\n    this.store.dispatch(ui.isLoading());\n    try {\n      const usuario = this.registroForm.value;\n      // Swal.fire({\n      //   title: 'Cargando',\n      //   didOpen: () => {\n      //       Swal.showLoading(null)\n      //   }\n      // })\n      this.authService.crearUsuario(usuario).then(userCreado => {\n        console.log(\"creado user\", userCreado);\n        console.log(userCreado.idUsuario);\n        // Swal.close();\n        this.store.dispatch(ui.stopLoading());\n        this.router.navigate(['/']);\n      }).catch(e => {\n        console.warn(\"error al loguearse\", e.code);\n        this.store.dispatch(ui.stopLoading());\n        Swal.fire({\n          icon: 'error',\n          title: 'Oops...',\n          text: e.message\n        });\n      });\n    } catch (error) {\n      console.log(\"ha ocurrido un error al crear usuario\");\n    }\n  }\n};\nRegisterComponent = __decorate([Component({\n  selector: 'app-register',\n  templateUrl: './register.component.html',\n  styles: []\n})], RegisterComponent);\nexport { RegisterComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}